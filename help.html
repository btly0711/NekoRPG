<!DOCTYPE html>
<html>
<body>
    <head>
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
            }
            .collapsible {
                background-color: #eee;
                color: #444;
                cursor: pointer;
                padding: 18px;
                width: 100%;
                border: none;
                text-align: left;
                outline: none;
                font-weight: bold;
                font-size: 16px;
                border-top: 1px solid gray;
            }
            .collapsible:hover, .collapsible.active {
                background-color: #ccc;
            }
            .content {
                padding: 0 18px;
                display: none;
                overflow: hidden;
                background-color: #f1f1f1;
            }

            #header {
                background-color: #eee;
                color: #444;
                font-size: 20px;
                padding: 18px;
                width: fit-content;
                border: none;
                text-align: left;
                outline: none;
                font-weight: bold;
                margin-bottom: 20px;
                font-family: sans-serif;
            }

            .separated { 
                border-top: 4px solid gray;
            }
        </style>
    </head>

<div id="header">点击菜单来展开内容</div>

<h3> NekoRPGV0.20 - btly</h3>
<h3> 帮助页面</h3>
<br><br>

<div id="content_blocks">
    <button type="button" class="collapsible">现在的游戏结尾是哪里?</button>
    <div class="content">
        在目前版本，游戏截止1幕2区[20层]
        <br>最终剧情为与【腐蚀质石精】的战斗。
    </div>

    <button type="button" class="collapsible">境界/经验</button>
    <div class="content">
        获取经验值，提升境界，获得属性。
        <br>提升境界会同时增加攻击,防御,敏捷,血量。
        <br>每3个小境界还会提升攻击速度。
        <br>境界来源：猫可露露
    </div>

    <button type="button" class="collapsible">经济</button>
    <div class="content">
        <ul>
            <li> 货币:
                <ul>
                    <li>
                        1000 C = 1 X, 1000 X = 1 Z, 1000 Z = 1 D, 1000 D = 1 B.
                        <br>对应血洛大陆的四种通用钱币，
                        <br>和设定上作为地方性辅币的铜钱。
                    </li>
                </ul>
            </li>
            <li>
                价格
                <ul>
                    <li>
                        这里的商人都是奸商，售价远远高于收购价（一般为200%以上）
                        <br>"讨价还价" 技能可以在一定程度上削弱售价。 
                    </li>
                </ul>
            </li>
            <li>
                <del>市场饱和</del>
                <ul>
                    <li>
                        <del>
                        你出售大量怪物材料时，价格会慢慢降低，最终可达原价的10%。这对所有商人生效。
                        <br>价格会随着时间恢复，但这是一个极慢的过程。
                    </del>
                    </li>
                    
                    <li>
                    根本没人喜欢这种机制！它已经被删掉了！
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <button type="button" class="collapsible">合成</button>
    <div class="content">
        <ul>
            <li> 合成子分类:
                <ul>
                    <li> 
                        物品：大部分是无聊的东西，比如消耗品或进一步合成的原料
                    </li>
                    <li>
                        部件：可以被进一步组装成装备的物品<br>
                        它们的质量并不直接转移到装备数据，它们的属性会显示为“基础值”<br>
                        也就是它们制作的100%质量装备的数值。
                        </li>
                    <li>
                        装备: 你真正可以穿上的东西，大部分由部件组成。<br>
                        品质会被技能等级与部件等级所影响。
                    </li>
                </ul>
            </li>
            <li>
                你可以从被动活动[WIP]与战利品中获取物品，可以被用来合成的物品常常会在介绍中提到它的用途。<br>
                对于被动活动[WIP]，需要的时间，成功几率，获取物品的数量，都会被技能等级影响。
            </li>
            <li>
                质量和质量上限
                <ul>
                    <li>
                        装备的质量上限为100%+3.3%*技能等级<br>
                        部件的质量上限为100%+3%*技能等级<br>
                        它一般存在于高等级装备质量追上低等级装备质量的情况下。
                    </li>
                    <li>
                        装备的质量会在一定范围之内，也会被质量上限修正。
                        一般而言，装备质量和部件等级负相关，和工作台等级正相关，和技能等级正相关。
                        备注：现在部件等级和工作台等级都只存在1.
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <button type="button" class="collapsible">战斗</button>
    <div class="content">
        <ul>
            <li>
                AGI / 敏捷:
                <ul>
                    <li>一切影响 命中/闪避 的 技能/环境 的总和。 </li>
                    <li>折算是非线性的。</li>
                    <li>AGI=5*敌方AGI，命中率为98.0%</li>
                    <li>AGI=2*敌方AGI，命中率为92.1%</li>
                    <li>AGI=1*敌方AGI，命中率为78.4%</li>
                    <li>AGI=0.5*敌方AGI，命中率为50.0%</li>
                    <li>AGI=0.2*敌方AGI，命中率为15.7%</li>
                </ul> 
            </li><br>
            <li>
                SPD / 攻击速度:
                <ul>
                    <li>
                        直接转换为角色/怪物的攻击速度。2 * SPD = 同样的时间进行两次攻击。
                    </li>
                    <li>
                        <del>
                        为了避免精神错乱/潜在的问题，在战斗开始时，攻击速度会被折算以确保没有什么的攻击速度快于1/s.
                        </del>
                        <br>
                        喂喂！攻速软上限是要急死我吗！<br>
                        攻速软上限已上调至10/s.
                    </li>
                </ul>
            </li><br>
            <li><del>体力:</del>
                <ul><del>
                    <li>当体力降到0，角色的攻击速度和攻击伤害会下降一半。</li>
                    <li>惩罚会被“忍饥挨饿”技能削弱，该技能在0体力战斗时获得经验。</li>
                    <li>它也会被提升体力上限/体力恢复削弱，例如使用食物恢复体力。</li>
                    </del>
                    <li>体力系统？谁会喜欢时不时来重新挂一下角色！</li>
                    <li>它已经被彻底删掉了。</li>
                </ul>
            </li><br>
            <li><del>特殊属性:</del>
                <ul><del>
                    <li>在合理的范围内，会对猫可露露进行复刻。</li>
                    <li>对地图伤害/结算伤害等属性，</li>
                    <li>优先做到“等效”，如果做不到则增添新效果。</li>
                    <li>目标是更切实的体会到【特殊属性】的作用！</li>
                </ul>
            </li><br>
            <li><del>境界:</del>
                <ul><del>
                    <li>NekoRPG的境界划分为微尘/万物/潮汐/大地等级别。<br>
                    微尘级，最弱势的群体，体质虚弱。<br>
                    万物级，力壮如牛，胆气如虎。<br>
                    潮汐级，感应元素，神力千钧……<br>
                    在这之上——<span class='realm_terra'>大地级</span>则为公认的修炼者第一个大门槛。<br>
                    
                    越过这个门槛，方可仗剑行走大陆，温饱无忧。
                </ul>
            </li><br>
            <li>
                战斗姿态[WIP]:
                <ul>
                    <li>
                        提供不同的奖励与削弱，在不同情况下有不同的用处。
                        唯一的缺陷就是现在还没做——在咕了在咕了！
                    </li>
                    <li>
                        在战斗中修改姿态会重置攻击条。（不许啄笔！）
                    </li>
                </ul>
            </li>
        </ul>
    </div>

    <button type="button" class="collapsible">地点类型和昼夜循环</button>
    <div class="content">
        <ul>
            <li>
                根据原作血洛大陆的描述，建立了血洛计时系统。<br>
                血洛大陆的计时系统分为纪元-年-日-小时-分。<br>
                1小时=60分钟，1日=180小时，50日=1年，10000年=1纪元。<br>
                如此，血洛1分钟大约等于地球58.9秒。<br>
            </li><br>
            <li>
                在普通区域的夜晚 (150~30时), 以及黑暗区域的全天 , Neko 会得到额外的敏捷惩罚。
                <br>
                该惩罚会被“夜视”削弱——仅仅是呆在这样的区域就会被动获得“夜视”经验。
                <br>
            </li><br>
            <li>
                一些战斗区域存在特殊的性质，带来了特定属性上的惩罚。<br>
                例子：一些区域或许没有充足的移动区域，导致躲避变得困难。<br>
                它们一般拥有一个配套技能来削弱惩罚，同样在这样的区域中就能被动获取经验。
            </li>
            
        </ul>
    </div>
    <button type="button" class="collapsible">经验值和解锁</button>
    <div class="content">
        <ul>
            <li> 经验值:
                <ul>
                    <li>更强的怪物提供更多的经验。它不会被区域属性影响，但是会被怪物数量^0.334影响。(同时迎战8只怪物会带来2倍经验)</li>
                    <li>这里也有很多来源丰富的加成(主要是技能里程碑和阅读过的书本[WIP]),境界提升也能给技能经验值带来增强。</li>
                </ul> 
            </li><br>
            <li> 解锁: 
                <ul>
                    <li>{新地点，新行动[WIP],新行动}，会因为{和某人说话，通过某个区域(可能需要不止一次),行动的完成[WIP]解锁}</li>
                </ul>
            </li>
        </ul>
    </div>
    <button type="button" class="collapsible">物品</button>
    <div class="content">
        <ul>
            <li>
                装备质量
                <ul>
                    <li>
                        所有可装备物品都有“质量”乘数，它直接影响装备的基础属性（武器的攻击，护甲的防御）和价格。
                        <br>
                        除此以外，更高的稀有度等级会提供另一个乘数(只与等级相关)，影响装备的[全部]属性。
                        <br>
                        <pre>
        质量        稀有度          颜色       额外乘数
        0-49%       垃圾           灰色        x1
        50-99%      常见           白色        x1
        100-129%    超常           绿色        x1.1
        130-159%    稀有           蓝色        x1.3
        160-199%    史诗           紫色        x1.6
        200-246%    传说           橙色        x2
        247-250%    神秘           ????        x2.5
                        </pre>
                    </li>
                    <li>
                        <strong>在版本 V0.20 , 商人提供物品的最高质量为 120% .</strong>
                        然而，如果使用大量材料练习技能，理论上可能制造出质量~145%的装备。
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <button type="button" class="collapsible">宝石</button>
    <div class="content">
        <ul>
            <li> 等级:
                <ul>
                    <li>宝石颜色不再指示宝石的属性，而是指示等级</li>
                    <li>在同一样式的宝石中，绿>红>蓝>黄.</li>
                </ul> 
            </li><br>
            <li> 效果: 
                <ul>
                    <li>使用宝石会随机增幅Neko的攻击/防御/敏捷/血量。</li>
                    <li>如果使用的宝石获取的属性太多，获取的属性将会被软上限限制！</li>
                    <li>确切地说，软上限起始点是宝石提供基础属性的30倍...</li>
                </ul>
            </li>
        </ul>
    </div>

    <button type="button" class="collapsible separated">致谢与信息</button>
    <div class="content">
        <ul>
            <li><a href="https://miktaew.github.io/yet-another-idle-rpg/" target="_blank">Yet Another Idle RPG</a> - Miktaew , 作为NekoRPG这一mod的原作</li>
            <li><a href="https://github.com/turuslan/HackTimer" target="_blank">HackTimer</a> - Turuslan, 用于在后台维持网页的运行</li> 
            <li>图标和样式 - Google</li>
            <li>剧情/世界观来源: 猫可露露 - 千夜</li>
    </div>
    <button type="button" class="collapsible separated">支持游戏</button>
    <div class="content">
        [将会在正式版开放]
    </div>
</div>

<script>
    const btns = document.getElementsByClassName("collapsible");
    //const content = document.getElementById("content");

    for(let i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", () => {
            btns[i].classList.toggle("active");
            const content = btns[i].nextElementSibling;
            if (content.style.display !== "block"){
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        });
    }

    const blocks = document.getElementById("content_blocks");
    blocks.addEventListener("click", (event) => {
        if(event.target.classList.contains("collapsible")) {
            const rect = event.target.nextElementSibling.getBoundingClientRect();
            const windowHeight = document.documentElement.clientHeight;

            if (rect.top < 0 || rect.bottom > windowHeight) {
                event.target.nextElementSibling.scrollIntoView({ behavior: 'smooth', block: 'end'});
            }
        }
    });
    
</script>

</body>
</html>